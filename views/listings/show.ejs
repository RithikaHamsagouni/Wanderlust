
<% layout("/layouts/boilerplate") %>

<div class="show-container">
  <div class="listing-card">
    <!-- Image -->
    <img 
      src="<%= typeof listing.image === 'string' ? listing.image : (listing.image && listing.image.url ? listing.image.url : 'https://via.placeholder.com/800x450?text=No+Image') %>" 
      alt="<%= listing.title %>"
      class="listing-image"
      onerror="this.src='https://via.placeholder.com/800x450?text=No+Image';"
    />

    <!-- Details -->
    <div class="listing-details">
      <h1 class="listing-title"><%= listing.title %></h1>
      <p class="listing-description"><%= listing.description %></p>

      <!-- Info Grid -->
      <div class="listing-info">
        <!-- Price -->
        <div class="info-item">
          <i class="fas fa-rupee-sign info-icon"></i>
          <div class="info-content">
            <div class="info-label">Price per night</div>
            <div class="info-value listing-price">
              â‚¹ <%= listing.price.toLocaleString('en-IN') %>
            </div>
          </div>
        </div>

        <!-- Location -->
        <div class="info-item">
          <i class="fas fa-map-marker-alt info-icon"></i>
          <div class="info-content">
            <div class="info-label">Location</div>
            <div class="info-value"><%= listing.location %></div>
          </div>
        </div>

        <!-- Country -->
        <div class="info-item">
          <i class="fas fa-globe info-icon"></i>
          <div class="info-content">
            <div class="info-label">Country</div>
            <div class="info-value"><%= listing.country %></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="listing-actions">
      <a href="/listings/<%= listing._id %>/edit" class="btn-secondary-custom">
        <i class="fas fa-edit me-2"></i>Edit Listing
      </a>
      <form method="POST" action="/listings/<%= listing._id %>?_method=DELETE">
        <button type="submit" class="btn-danger-custom" onclick="return confirm('Are you sure you want to delete this listing?')">
          <i class="fas fa-trash me-2"></i>Delete Listing
        </button>
      </form>
      <a href="/listings" class="btn-secondary-custom ms-auto">
        <i class="fas fa-arrow-left me-2"></i>Back to Listings
      </a>
    </div>
  </div>
</div>
